<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto de Acceso - Unnamed</title>
    
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/header.css">
    <link rel="stylesheet" href="/assets/css/kiosk.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>

    <header class="main-header qr-header">
        <div class="header-left">
             <h1 class="header-title">Unnamed</h1>
        </div>
        <div class="header-center">
            <span id="header-clock" class="header-clock-display">00:00:00</span>
        </div>
        <div class="header-right">
            <button id="back-to-dashboard-secure" class="btn btn-secondary btn-lock">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:5px;">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                Dashboard
            </button>
            <svg id="switcher" class="switcher" aria-hidden="true" width="24" height="24" viewBox="0 0 24 24">
                <circle class="switcher__sun" cx="12" cy="12" r="6" mask="url(#moon-mask)" fill="currentColor" />
                <g class="switcher__sun-beams" stroke="currentColor">
                    <line x1="12" y1="1" x2="12" y2="3" />
                    <line x1="12" y1="21" x2="12" y2="23" />
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                    <line x1="1" y1="12" x2="3" y2="12" />
                    <line x1="21" y1="12" x2="23" y2="12" />
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                </g>
                <mask id="moon-mask">
                    <rect x="0" y="0" width="100%" height="100%" fill="white" />
                    <circle class="switcher__moon" cx="24" cy="10" r="6" fill="black" />
                </mask>
            </svg>
        </div>
    </header>

    <main class="kiosk-split-layout">
        
        <section class="qr-column">
            <div class="qr-wrapper">
                <h2>Escanear Entrada</h2>
                <div class="qr-box">
                    <div id="qrcode"></div>
                </div>
                <div class="timer-bar"><div class="timer-progress" id="progress-bar"></div></div>
                <p class="qr-help-text">Actualizando código de seguridad...</p>
                
                <div class="debug-simulator">
                    <select id="sim-student-select"><option>Cargando...</option></select>
                    <button id="btn-simulate-scan">Simular Escaneo</button>
                </div>
            </div>
        </section>

        <section class="info-column">
            <div id="default-state" class="info-state active">
                <div class="idle-icon">
                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <h3>Esperando Alumno...</h3>
                <p>Escanea el código QR para registrar tu acceso.</p>
            </div>

            <div id="user-result" class="info-state">
                <div class="user-header">
                    <img id="user-photo" src="" alt="Foto">
                    <div class="user-main-text">
                        <h2 id="user-name">Nombre Completo</h2>
                        <span id="user-group" class="badge">Grupo 1IM1</span>
                    </div>
                </div>

                <div class="status-display" id="access-status">
                    <span class="status-icon">✓</span>
                    <span class="status-text">Entrada Autorizada</span>
                </div>

                <div class="details-grid">
                    <div class="detail-item">
                        <label>Horario Entrada</label>
                        <span id="schedule-in">--:--</span>
                    </div>
                    <div class="detail-item">
                        <label>Horario Salida</label>
                        <span id="schedule-out">--:--</span>
                    </div>
                </div>

                <div id="vehicle-card" class="vehicle-card hidden">
                    <div id="vehicle-visual" class="vehicle-visual-container">
                        </div>
                    <div class="vehicle-info">
                        <strong>Vehículo Registrado</strong>
                        <p id="vehicle-desc">Sedan Rojo - Placas 123</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div id="reauth-modal" class="modal">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <h3>Seguridad</h3>
            <p>Ingresa tu contraseña para volver al Dashboard.</p>
            <form id="reauth-form">
                <div class="form-group">
                    <input type="password" id="reauth-pass" placeholder="Contraseña de Admin" required style="text-align: center;">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Desbloquear</button>
                <button type="button" id="cancel-reauth" class="btn btn-secondary" style="width: 100%; margin-top: 10px;">Cancelar</button>
            </form>
        </div>
    </div>

    <script src="/assets/js/api.js"></script>
    <script src="/assets/js/theme-changer.js"></script>
    <script src="/assets/js/qr-kiosk.js"></script>

</body>
</html>
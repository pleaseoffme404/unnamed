<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutores - Unnamed Admin</title>
    
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/header.css">
    <link rel="stylesheet" href="../assets/css/table-view.css">
    <link rel="stylesheet" href="../assets/css/tutores.css">
</head>
<body>

    <header class="main-header"></header>

    <main class="page-content">
        
        <div class="search-grid">
            <div class="search-box">
                <label for="search-input">Buscar Tutor</label>
                <input type="text" id="search-input" placeholder="Nombre, Correo o Teléfono...">
            </div>
            
            <div class="action-box-group">
                <a href="/tutores/register/index.html" class="btn btn-primary btn-full">
                    <span>+</span> Nuevo Tutor
                </a>
                <a href="/tutores/mass-register/index.html" class="btn btn-secondary btn-full">
                    Carga Masiva
                </a>
            </div>
        </div>

        <div id="list-view" class="view-section">
            <div class="table-wrapper">
                <table id="tutores-table">
                    <thead>
                        <tr>
                            <th>Tutor</th>
                            <th>Contacto</th>
                            <th>Alumnos</th>
                            <th>Estado</th>
                            <th style="text-align: right;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tutores-tbody">
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 40px;">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="pagination-toolbar">
                <div class="rows-selector">
                    <label>Mostrar</label>
                    <select id="rows-per-page">
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                    <span>registros</span>
                </div>
                
                <div class="page-info">
                    Viendo <span id="lbl-start">0</span> - <span id="lbl-end">0</span> de <span id="lbl-total">0</span>
                </div>

                <div class="pagination-buttons">
                    <button id="btn-prev" class="btn-page" disabled>&lt; Anterior</button>
                    <button id="btn-next" class="btn-page" disabled>Siguiente &gt;</button>
                </div>
            </div>
        </div>

        <div id="detail-view" class="view-section hidden">
            <div class="register-card">
                <div class="register-header">
                    <h2 class="page-title">Editar Tutor</h2>
                    <button id="btn-close-detail" class="btn btn-secondary">Cerrar</button>
                </div>

                <form id="tutor-form">
                    <input type="hidden" id="tutor-id" name="id">
                    <input type="hidden" id="tutor-active" name="esta_activo">
                    <input type="hidden" id="tutor-image-url" name="imagen_url_actual">

                    <div class="form-grid-layout">
                        <div class="form-col-photo">
                            <div class="photo-preview" id="photo-preview"></div>
                            <input type="file" id="tutor-photo" name="imagen" accept="image/*" style="display: none;">
                        </div>

                        <div class="form-col-data">
                            <div class="row-2">
                                <div class="form-group">
                                    <label>Nombres</label>
                                    <input type="text" id="d-nombres" name="nombres" required>
                                </div>
                                <div class="form-group">
                                    <label>Apellidos</label>
                                    <div style="display: flex; gap: 10px;">
                                        <input type="text" id="d-paterno" name="apellido_paterno" placeholder="Paterno" required>
                                        <input type="text" id="d-materno" name="apellido_materno" placeholder="Materno">
                                    </div>
                                </div>
                            </div>

                            <div class="row-2">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="d-email" name="correo_electronico" required>
                                </div>
                                <div class="form-group">
                                    <label>Teléfono</label>
                                    <input type="tel" id="d-telefono" name="telefono">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Notificaciones</label>
                                <select id="d-notif" name="notificaciones">
                                    <option value="correo">Solo Correo</option>
                                    <option value="ambas">Correo y App</option>
                                    <option value="ninguna">Ninguna</option>
                                </select>
                            </div>

                            <div class="form-section-title">Asignar Alumnos</div>
                            <div class="form-group">
                                <label>Buscar Alumno</label>
                                <div class="student-picker">
                                    <input type="text" id="edit-student-search" class="student-search-input" placeholder="Escribe para buscar..." autocomplete="off">
                                    <div id="edit-search-results" class="student-search-results"></div>
                                </div>
                                <div id="edit-selected-students" class="selected-students-container">
                                    </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions-footer space-between">
                        <button type="button" id="btn-soft-delete" class="btn btn-danger">Desactivar Cuenta</button>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>

    </main>

    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/header.js"></script>
    <script src="../assets/js/tutores-manager.js"></script>

</body>
</html>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Directorio Alumnos - Unnamed</title>
    
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/header.css">
    <link rel="stylesheet" href="../assets/css/table-view.css">
    <link rel="stylesheet" href="../assets/css/alumnos.css">
</head>
<body>

    <header class="main-header"></header>

    <main class="page-content">
        
        <div class="search-grid">
            <div class="search-box">
                <label for="search-input">Buscador Principal</label>
                <input type="text" id="search-input" placeholder="Buscar por Boleta, Nombre o Correo...">
            </div>
            <div class="filter-box">
                <label for="filter-grade">Filtrar Semestre</label>
                <select id="filter-grade">
                    <option value="">Todos</option>
                </select>
            </div>
            
            <div class="action-box-group">
                <a href="/alumnos/register/index.html" class="btn btn-primary btn-full">
                    <span>+</span> Nuevo Alumno
                </a>
                <a href="/alumnos/mass-register/index.html" class="btn btn-secondary btn-full">
                    Carga Masiva
                </a>
            </div>
        </div>

        <div id="list-view" class="view-section">
            <div class="table-wrapper">
                <table id="alumnos-table">
                    <thead>
                        <tr>
                            <th>Alumno</th>
                            <th>Boleta / CURP</th> 
                            <th>Semestre / Grupo</th>
                            <th>Estado</th>
                            <th style="text-align: right;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="alumnos-tbody">
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 40px;">Cargando directorio...</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="pagination-toolbar">
                <div class="rows-selector">
                    <label>Mostrar</label>
                    <select id="rows-per-page">
                        <option value="10">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                    <span>registros</span>
                </div>
                
                <div class="page-info">
                    Viendo <span id="lbl-start">0</span> - <span id="lbl-end">0</span> de <span id="lbl-total">0</span>
                </div>

                <div class="pagination-buttons">
                    <button id="btn-prev" class="btn-page" disabled>&lt; Anterior</button>
                    <button id="btn-next" class="btn-page" disabled>Siguiente &gt;</button>
                </div>
            </div>
        </div>

        <div id="detail-view" class="view-section hidden">
             <div class="register-card">
                <div class="register-header">
                    <h2 class="page-title">Editar Información</h2>
                    <button id="btn-close-detail" class="btn btn-secondary">Cerrar Edición</button>
                </div>

                <form id="student-form">
                    <input type="hidden" id="student-id" name="id">
                    <input type="hidden" id="student-active" name="esta_activo">
                    <input type="hidden" id="student-image-url" name="imagen_url_actual">

                    <div class="form-grid-layout">
                        <div class="form-col-photo">
                            <div class="photo-preview" id="photo-preview"></div>
                            <input type="file" id="student-photo" name="imagen" accept="image/*" style="display: none;">
                        </div>

                        <div class="form-col-data">
                            
                            <div class="row-2">
                                <div class="form-group">
                                    <label>Boleta (Identificador)</label>
                                    <input type="text" id="d-boleta" name="boleta" readonly style="background-color: var(--bg-app); cursor: not-allowed; font-weight: bold; color: var(--text-primary);">
                                </div>
                                <div class="form-group">
                                    <label>CURP</label>
                                    <input type="text" id="d-curp" name="curp" required>
                                </div>
                            </div>

                            <div class="row-2">
                                <div class="form-group">
                                    <label>Nombres</label>
                                    <input type="text" id="d-nombres" name="nombres" required>
                                </div>
                                <div class="form-group">
                                    <label>Apellidos</label>
                                    <div style="display: flex; gap: 10px;">
                                        <input type="text" id="d-paterno" name="apellido_paterno" placeholder="Paterno" required>
                                        <input type="text" id="d-materno" name="apellido_materno" placeholder="Materno">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row-3">
                                <div class="form-group">
                                    <label>Semestre</label>
                                    <input type="text" id="d-grado" name="grado" readonly style="background-color: var(--bg-app); cursor: not-allowed;">
                                </div>
                                <div class="form-group">
                                    <label>Grupo</label>
                                    <input type="text" id="d-grupo" name="grupo" readonly style="background-color: var(--bg-app); cursor: not-allowed;">
                                </div>
                                <div class="form-group">
                                    <label>Sangre</label>
                                    <select id="d-sangre" name="tipo_sangre">
                                        <option value="">Seleccionar...</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row-2">
                                <div class="form-group">
                                    <label>NSS</label>
                                    <input type="text" id="d-nss" name="nss">
                                </div>
                                <div class="form-group">
                                    </div>
                            </div>

                            <div class="form-section-title">Contacto</div>
                            <div class="row-2">
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="d-email" name="correo_electronico" required>
                                </div>
                                <div class="form-group">
                                    <label>Teléfono</label>
                                    <input type="tel" id="d-telefono" name="telefono">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions-footer space-between">
                        <button type="button" id="btn-soft-delete" class="btn btn-danger">Desactivar Alumno</button>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>

    </main>

    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/header.js"></script>
    <script src="../assets/js/alumnos-manager.js"></script>

</body>
</html>
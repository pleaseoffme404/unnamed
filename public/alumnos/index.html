<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión Alumnos - Unnamed</title>
    
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/header.css">
    <link rel="stylesheet" href="../assets/css/table-view.css">
    <link rel="stylesheet" href="../assets/css/alumnos.css">
</head>
<body>

    <header class="main-header"></header>

    <main class="page-content">
        
        <div class="search-grid">
            <div class="search-box">
                <label for="search-input">Buscar Alumno</label>
                <input type="text" id="search-input" placeholder="Nombre, apellido o CURP...">
            </div>
            <div class="filter-box">
                <label for="filter-grade">Filtrar Grado</label>
                <select id="filter-grade">
                    <option value="">Todos</option>
                    <option value="1">1er Grado</option>
                    <option value="2">2do Grado</option>
                    <option value="3">3er Grado</option>
                    <option value="4">4to Grado</option>
                    <option value="5">5to Grado</option>
                    <option value="6">6to Grado</option>
                </select>
            </div>
            <div class="action-box">
                <button id="btn-new-student" class="btn btn-primary" style="width: 100%; height: 42px; margin-top: 22px;">
                    + Nuevo Alumno
                </button>
            </div>
        </div>

        <div id="list-view" class="view-section">
            <div class="table-wrapper">
                <table id="alumnos-table">
                    <thead>
                        <tr>
                            <th>Alumno</th>
                            <th>CURP</th>
                            <th>Grado / Grupo</th>
                            <th>Estado</th>
                            <th style="text-align: right;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="alumnos-tbody">
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 40px;">Cargando...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="detail-view" class="view-section hidden">
            <div class="detail-card">
                <div class="detail-header">
                    <h2 id="detail-title">Editar Alumno</h2>
                    <button id="btn-close-detail" class="btn btn-secondary">Cerrar / Volver</button>
                </div>

                <form id="student-form">
                    <input type="hidden" id="student-id" name="id">
                    <input type="hidden" id="student-image-url" name="imagen_url_actual">
                    <input type="hidden" name="esta_activo" id="student-active" value="1">

                    <div class="form-grid-layout">
                        <div class="form-col-photo">
                            <div class="photo-preview" id="photo-preview"></div>
                            <label for="student-photo" class="btn btn-secondary btn-small">Cambiar Foto</label>
                            <input type="file" id="student-photo" name="imagen" accept="image/*" style="display: none;">
                        </div>

                        <div class="form-col-data">
                            <div class="row-2">
                                <div class="form-group">
                                    <label>Nombre(s)</label>
                                    <input type="text" name="nombres" id="d-nombres" required>
                                </div>
                                <div class="form-group">
                                    <label>Apellido Paterno</label>
                                    <input type="text" name="apellido_paterno" id="d-paterno" required>
                                </div>
                            </div>
                            <div class="row-2">
                                <div class="form-group">
                                    <label>Apellido Materno</label>
                                    <input type="text" name="apellido_materno" id="d-materno">
                                </div>
                                <div class="form-group">
                                    <label>CURP</label>
                                    <input type="text" name="curp" id="d-curp" required>
                                </div>
                            </div>
                            <div class="row-3">
                                <div class="form-group">
                                    <label>Grado</label>
                                    <input type="text" name="grado" id="d-grado">
                                </div>
                                <div class="form-group">
                                    <label>Grupo</label>
                                    <input type="text" name="grupo" id="d-grupo">
                                </div>
                                <div class="form-group">
                                    <label>Sangre</label>
                                    <input type="text" name="tipo_sangre" id="d-sangre">
                                </div>
                            </div>
                            
                            <h4 style="margin-top: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 5px;">Cuenta de Acceso</h4>
                            <div class="row-2">
                                <div class="form-group">
                                    <label>Correo Electrónico</label>
                                    <input type="email" name="correo_electronico" id="d-email" required>
                                </div>
                                <div class="form-group">
                                    <label>Teléfono</label>
                                    <input type="tel" name="telefono" id="d-telefono">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions-footer">
                        <button type="button" id="btn-soft-delete" class="btn btn-danger">Desactivar Alumno</button>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>

    </main>

    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/header.js"></script>
    <script src="../assets/js/alumnos-manager.js"></script>

</body>
</html>